{"version":3,"sources":["../../middlewares/checkToken.js"],"names":["req","res","next","token","headers","status","message","tokenObj","verify","secret"],"mappings":";;;;;;AAGA;;;;AACA;;;;;;2cAJA;;;;;;yDAKe,iBAAOA,GAAP,EAAWC,GAAX,EAAeC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AACLC,6BADK,GACGH,IAAII,OAAJ,CAAY,eAAZ,CADH;;AAAA,4BAEND,KAFM;AAAA;AAAA;AAAA;;AAAA,yDAGAD,KAAK;AACRG,oCAAO,GADC;AAERC,qCAAQ;AAFA,yBAAL,CAHA;;AAAA;AAAA;AASHC,gCATG,GASQ,uBAAIC,MAAJ,CAAWL,KAAX,EAAiB,iBAAOM,MAAxB,CATR;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUFH,+BAVE,eAUFA,OAVE;AAAA,yDAWAJ,KAAK;AACRG,oCAAO,GADC;AAERC;AAFQ,yBAAL,CAXA;;AAAA;AAgBXN,4BAAIG,KAAJ,GAAYI,QAAZ;AACAL;;AAjBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K","file":"checkToken.js","sourcesContent":["/**\r\n * Created by Semyon on 31.03.2017.\r\n */\r\nimport jwt from 'jsonwebtoken';\r\nimport config from '../config';\r\nexport default async (req,res,next)=>{\r\n    const token = req.headers['authorization'];\r\n    if (!token){\r\n        return next({\r\n            status:403,\r\n            message:'Forbidden.No token!'\r\n        });\r\n    }\r\n    try {\r\n        var tokenObj = jwt.verify(token,config.secret);\r\n    }catch ({message}){\r\n        return next({\r\n            status:400,\r\n            message\r\n        });\r\n    }\r\n    req.token = tokenObj;\r\n    next();\r\n}"]}